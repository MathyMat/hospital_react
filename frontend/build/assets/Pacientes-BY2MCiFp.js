import{a as o,j as e}from"./index-C2VTEInz.js";import{a as c}from"./index-xsH4HHeE.js";var x={};const p=()=>{const[s,d]=o.useState([]),[n,l]=o.useState({nombre:"",apellido:"",dni:"",fecha_nacimiento:"",genero:"",telefono:"",direccion:"",historial:""}),t=`${x.REACT_APP_API_URL}/api/pacientes`,i=async()=>{try{const a=await c.get(t);d(a.data)}catch{alert("Error al cargar pacientes")}},r=a=>{l({...n,[a.target.name]:a.target.value})},h=async()=>{try{await c.post(t,n),l({nombre:"",apellido:"",dni:"",fecha_nacimiento:"",genero:"",telefono:"",direccion:"",historial:""}),i()}catch{alert("Error al agregar paciente")}},m=async a=>{try{await c.delete(`${t}/${a}`),i()}catch{alert("Error al eliminar paciente")}};return o.useEffect(()=>{i()},[]),e.jsxs("div",{className:"container mt-4",children:[e.jsx("h2",{children:"Registro de Pacientes"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("input",{className:"form-control mb-2",placeholder:"Nombre",name:"nombre",value:n.nombre,onChange:r}),e.jsx("input",{className:"form-control mb-2",placeholder:"Apellido",name:"apellido",value:n.apellido,onChange:r}),e.jsx("input",{className:"form-control mb-2",placeholder:"DNI",name:"dni",value:n.dni,onChange:r}),e.jsx("input",{className:"form-control mb-2",type:"date",name:"fecha_nacimiento",value:n.fecha_nacimiento,onChange:r}),e.jsx("input",{className:"form-control mb-2",placeholder:"Género",name:"genero",value:n.genero,onChange:r}),e.jsx("input",{className:"form-control mb-2",placeholder:"Teléfono",name:"telefono",value:n.telefono,onChange:r}),e.jsx("input",{className:"form-control mb-2",placeholder:"Dirección",name:"direccion",value:n.direccion,onChange:r}),e.jsx("input",{className:"form-control mb-2",placeholder:"Historial médico breve",name:"historial",value:n.historial,onChange:r}),e.jsx("button",{className:"btn btn-primary",onClick:h,children:"Agregar Paciente"})]}),e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Apellido"}),e.jsx("th",{children:"DNI"}),e.jsx("th",{children:"Fecha Nac."}),e.jsx("th",{children:"Género"}),e.jsx("th",{children:"Teléfono"}),e.jsx("th",{children:"Dirección"}),e.jsx("th",{children:"Historial"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:s.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.id}),e.jsx("td",{children:a.nombre}),e.jsx("td",{children:a.apellido}),e.jsx("td",{children:a.dni}),e.jsx("td",{children:new Date(a.fecha_nacimiento).toLocaleDateString()}),e.jsx("td",{children:a.genero}),e.jsx("td",{children:a.telefono}),e.jsx("td",{children:a.direccion}),e.jsx("td",{children:a.historial}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>m(a.id),children:"Eliminar"})})]},a.id))})]})]})};export{p as default};
