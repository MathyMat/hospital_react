import{a as i,j as e}from"./index-C2VTEInz.js";import{a as n}from"./index-xsH4HHeE.js";var C={};const E=()=>{const[j,p]=i.useState([]),[d,u]=i.useState([]),[h,g]=i.useState([]),[t,m]=i.useState({paciente_id:"",doctor_id:"",fecha:"",motivo:"",estado:"pendiente",notas:""}),r=C.REACT_APP_API_URL,o=async()=>{try{const a=await n.get(`${r}/api/citas`);p(a.data)}catch{alert("Error al cargar citas")}},b=async()=>{try{const a=await n.get(`${r}/api/pacientes`);u(a.data)}catch{alert("Error al cargar pacientes")}},v=async()=>{try{const a=await n.get(`${r}/api/doctores`);g(a.data)}catch{alert("Error al cargar doctores")}},s=a=>{m({...t,[a.target.name]:a.target.value})},f=async()=>{try{await n.post(`${r}/api/citas`,t),m({paciente_id:"",doctor_id:"",fecha:"",motivo:"",estado:"pendiente",notas:""}),o()}catch{alert("Error al agregar cita")}},_=async a=>{try{await n.delete(`${r}/api/citas/${a}`),o()}catch{alert("Error al eliminar cita")}};return i.useEffect(()=>{o(),b(),v()},[]),e.jsxs("div",{className:"container mt-4",children:[e.jsx("h2",{children:"GestiÃ³n de Citas"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("select",{className:"form-control mb-2",name:"paciente_id",value:t.paciente_id,onChange:s,children:[e.jsx("option",{value:"",children:"Seleccione Paciente"}),d.map(a=>e.jsxs("option",{value:a.id,children:[a.nombre," ",a.apellido]},a.id))]}),e.jsxs("select",{className:"form-control mb-2",name:"doctor_id",value:t.doctor_id,onChange:s,children:[e.jsx("option",{value:"",children:"Seleccione Doctor"}),h.map(a=>e.jsxs("option",{value:a.id,children:[a.nombre," ",a.apellidos]},a.id))]}),e.jsx("input",{className:"form-control mb-2",type:"datetime-local",name:"fecha",value:t.fecha,onChange:s}),e.jsx("input",{className:"form-control mb-2",placeholder:"Motivo de la cita",name:"motivo",value:t.motivo,onChange:s}),e.jsx("input",{className:"form-control mb-2",placeholder:"Notas adicionales",name:"notas",value:t.notas,onChange:s}),e.jsx("button",{className:"btn btn-primary",onClick:f,children:"Agregar Cita"})]}),e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Paciente"}),e.jsx("th",{children:"Doctor"}),e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Motivo"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Notas"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:j.map(a=>{var c,x;return e.jsxs("tr",{children:[e.jsx("td",{children:a.id}),e.jsx("td",{children:((c=d.find(l=>l.id===a.paciente_id))==null?void 0:c.nombre)||"-"}),e.jsx("td",{children:((x=h.find(l=>l.id===a.doctor_id))==null?void 0:x.nombre)||"-"}),e.jsx("td",{children:new Date(a.fecha).toLocaleString()}),e.jsx("td",{children:a.motivo}),e.jsx("td",{children:a.estado}),e.jsx("td",{children:a.notas}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>_(a.id),children:"Eliminar"})})]},a.id)})})]})]})};export{E as default};
