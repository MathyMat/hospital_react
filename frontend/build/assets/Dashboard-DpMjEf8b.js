import{g as b,a as m,j as e}from"./index-C2VTEInz.js";import{a as p}from"./index-xsH4HHeE.js";var h={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var j;function N(){return j||(j=1,function(i){(function(){var c={}.hasOwnProperty;function s(){for(var a="",r=0;r<arguments.length;r++){var n=arguments[r];n&&(a=l(a,t(n)))}return a}function t(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return s.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var r="";for(var n in a)c.call(a,n)&&a[n]&&(r=l(r,n));return r}function l(a,r){return r?a?a+" "+r:a+r:a}i.exports?(s.default=s,i.exports=s):window.classNames=s})()}(h)),h.exports}var g=N();const y=b(g),w=["xxl","xl","lg","md","sm","xs"],A="xs",v=m.createContext({prefixes:{},breakpoints:w,minBreakpoint:A}),{Consumer:_,Provider:C}=v;function E(i,c){const{prefixes:s}=m.useContext(v);return i||s[c]||c}const f=m.forwardRef(({bsPrefix:i,variant:c,animation:s="border",size:t,as:l="div",className:a,...r},n)=>{i=E(i,"spinner");const o=`${i}-${s}`;return e.jsx(l,{ref:n,...r,className:y(a,o,t&&`${o}-${t}`,c&&`text-${c}`)})});f.displayName="Spinner";var x={};const T=()=>{const[i,c]=m.useState(null);return m.useEffect(()=>{(async()=>{try{const[t,l,a]=await Promise.all([p.get(`${x.REACT_APP_API_URL}/api/dashboard/resumen`),p.get(`${x.REACT_APP_API_URL}/api/dashboard/actividades`),p.get(`${x.REACT_APP_API_URL}/api/dashboard/distribucion`)]),r=t.data,n=l.data,o=a.data,u=r.pacientes;c({overview:[{title:"Pacientes Registrados",value:r.pacientes,percent:100},{title:"Citas Totales",value:r.citas,percent:100},{title:"Habitaciones Ocupadas",value:r.ocupadas,percent:r.ocupadas},{title:"Emergencias Hoy",value:r.emergencias,percent:100},{title:"Tiempo Promedio de Espera",value:`${r.espera} min`,percent:100}],recentAppointments:n.map(d=>({paciente:d.paciente,doctor:d.doctor,especialidad:d.especialidad,fecha:new Date(d.fecha).toLocaleString(),estado:d.estado})),genderDistribution:[{title:"Masculino",value:Math.round(o.sexos.masculinos/u*100)},{title:"Femenino",value:Math.round(o.sexos.femeninos/u*100)}],citaTipos:o.tipos.map(d=>({title:d.tipo,value:d.total,percent:d.total}))})}catch(t){console.error("Error cargando datos del dashboard:",t)}})()},[]),i?e.jsx("div",{className:"container py-4",children:e.jsxs("div",{className:"row g-4",children:[i.overview.map((s,t)=>e.jsx("div",{className:"col-md-6 col-xl-4",children:e.jsx("div",{className:"card shadow-sm border-0 h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"text-muted",children:s.title}),e.jsx("h4",{className:"fw-bold text-primary",children:s.value}),e.jsx("div",{className:"progress mt-2",style:{height:"6px"},children:e.jsx("div",{className:"progress-bar bg-primary",role:"progressbar",style:{width:`${s.percent}%`}})})]})})},t)),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card shadow-sm border-0",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Últimas Citas"}),e.jsx("div",{className:"table-responsive",style:{maxHeight:"350px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Paciente"}),e.jsx("th",{children:"Doctor"}),e.jsx("th",{children:"Especialidad"}),e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Estado"})]})}),e.jsx("tbody",{children:i.recentAppointments.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(s.paciente)}&background=random`,alt:s.paciente,className:"rounded-circle me-2",width:"40",height:"40"}),e.jsx("span",{children:s.paciente})]})}),e.jsx("td",{children:s.doctor}),e.jsx("td",{children:s.especialidad}),e.jsx("td",{children:s.fecha}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light text-dark",children:s.estado})})]},t))})]})})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card shadow-sm border-0",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Distribución por Género"}),i.genderDistribution.map((s,t)=>e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("span",{className:"me-3",style:{width:"100px"},children:s.title}),e.jsx("div",{className:"progress flex-grow-1 me-3",style:{height:"6px"},children:e.jsx("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${s.value}%`}})}),e.jsxs("span",{className:"text-muted",children:[s.value,"%"]})]},t))]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card shadow-sm border-0",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Tipos de Citas"}),i.citaTipos.map((s,t)=>e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("span",{className:"me-3",style:{width:"120px"},children:s.title}),e.jsx("div",{className:"progress flex-grow-1 me-3",style:{height:"6px"},children:e.jsx("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:`${s.percent}%`}})}),e.jsx("span",{className:"text-muted",children:s.value})]},t))]})})})]})}):e.jsxs("div",{className:"flex justify-center items-center min-h-screen bg-light",children:[e.jsx(f,{animation:"border",variant:"primary"}),e.jsx("span",{className:"ms-3 text-muted",children:"Cargando datos del dashboard..."})]})};export{T as default};
